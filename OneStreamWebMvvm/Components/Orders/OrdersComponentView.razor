@inherits ComponentViewBase<OrdersComponentViewModel>
@namespace OneStreamWebMvvm
@using OneStreamWebUI.Mvvm.Toolkit

<h3>Orders</h3>
@*@if (Bind(x => x.ViewModelOrders) == null)*@
@if (DataContext.ViewModelOrders == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div style="margin: 20px 0;"><span>Orders Count: </span>&nbsp; @this.DataContext?.ViewModelOrders?.Count</div>
    <div style="margin: 20px 0;"><span>Selected Order: @this.DataContext?.SelectedViewModelOrder</span>&nbsp; </div>
    <div style="margin: 20px 0;"><span>Order Index: </span>&nbsp; @this.DataContext?.ViewModelOrders?.IndexOf(this.DataContext?.SelectedViewModelOrder!)</div>
   
    <button class="btn btn-primary" @onclick="@DataContext.AddOrder">Add Order</button> 
    <button class="btn btn-primary" @onclick="@DataContext.UpdateOrder">Update Order 2</button>
    <button class="btn btn-primary" @onclick="@DataContext.DeleteOrder">Delete Order 3</button>

    <div class="col-lg-12 control-section">
        <div class="content-wrapper">
            <div class="row" style="margin-top: 15px;">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th style="width: 100px;">Order ID</th>
                            <th style="width: 130px;">Customer ID</th>
                            <th style="width: 250px;">Customer Name</th>
                            <th style="width: 110px;">Freight</th>
                            <th style="width: 260px;">Order Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var orderItemViewModel in DataContext?.ViewModelOrders!)
                        {
                            <tr>
                                <td>@Bind(orderItemViewModel, x => x.OrderID)</td>
                                <td>@Bind(orderItemViewModel, x => x.CustomerID)</td>
                                <td>@Bind(orderItemViewModel, x => x.CustomerName)</td>
                                <td>@Bind(orderItemViewModel, x => x.OrderDate)</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
}


@code{
    [Parameter] public List<OrderModel>? DataSource { get; set; }
}